<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Queen's Gambit æº–è‘£å¨˜é¤Šæˆ</title>
    
    <link rel="icon" type="image/png" href="icon.png">
    <link rel="apple-touch-icon" href="icon.png">

    <style>
        /* --- v5.0 æ ¸å¿ƒæ¨£å¼ --- */
        :root {
            --primary: #4A148C;
            --primary-light: #7c43bd;
            --accent: #D4AF37;
            --danger: #D32F2F;
            --success: #2E7D32;
            --bg-gradient: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
            --card-bg: rgba(255, 255, 255, 0.95);
            --text-dark: #1A237E;
            --shadow: 0 10px 30px rgba(0,0,0,0.08);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
            background: var(--bg-gradient);
            color: var(--text-dark);
            margin: 0; padding: 0;
            display: flex; justify-content: center;
            min-height: 100vh;
        }

        .app-container {
            width: 100%; max-width: 480px; min-height: 100vh;
            padding: 20px; box-sizing: border-box; padding-bottom: 100px;
            position: relative; overflow-x: hidden;
        }

        /* Header */
        header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; padding-top: 10px; }
        .header-left { display: flex; align-items: center; }
        .app-logo { width: 45px; height: 45px; border-radius: 12px; box-shadow: var(--shadow); margin-right: 12px; border: 2px solid white; object-fit: cover; }
        h1 { margin: 0; font-size: 20px; font-weight: 800; color: var(--primary); }
        
        /* User Badge */
        .user-badge {
            display: flex; align-items: center; background: white; padding: 5px 12px 5px 5px;
            border-radius: 30px; box-shadow: var(--shadow); cursor: pointer; border: 1px solid var(--accent);
        }
        .user-avatar-mini { width: 30px; height: 30px; border-radius: 50%; background: #eee; margin-right: 8px; object-fit: cover; }
        .user-score-mini { font-weight: bold; color: var(--primary); font-size: 14px; }

        /* Glass Cards */
        .glass-card {
            background: var(--card-bg); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
            border-radius: 20px; padding: 20px; box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.6); margin-bottom: 15px;
        }

        /* ç›²ç›’èªéŒ„ */
        .labubu-card {
            background: linear-gradient(135deg, var(--primary) 0%, #7B1FA2 100%);
            color: white; position: relative; overflow: hidden; cursor: pointer;
        }
        .labubu-card::after {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 60%); pointer-events: none;
        }
        .labubu-card h2 { font-size: 11px; opacity: 0.9; margin: 0; display: flex; align-items: center; letter-spacing: 1px; color: #E1BEE7; }
        .labubu-card p { font-size: 18px; font-weight: bold; line-height: 1.4; margin: 15px 0; text-shadow: 0 2px 4px rgba(0,0,0,0.2); }

        /* Grid & Feature Cards */
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 20px; }
        .feature-card {
            background: rgba(255,255,255,0.8); border-radius: 16px; padding: 18px 10px; text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.03); cursor: pointer; border: 1px solid white;
        }
        .feature-card:active { transform: scale(0.96); }
        .feature-card i { font-size: 28px; display: block; margin-bottom: 8px; }
        .feature-card h3 { margin: 0; font-size: 14px; font-weight: 700; color: #333; }
        .feature-card span { font-size: 10px; color: #888; display: block; margin-top: 4px; }
        .fc-invest i { color: #FBC02D; } .fc-radar i { color: #E91E63; }
        .fc-auditor i { color: #43A047; } .fc-locker i { color: #039BE5; }

        /* é“å ´ Quiz æ¨£å¼ (æ–°) */
        .quiz-option {
            width: 100%; padding: 15px; margin-bottom: 10px; border-radius: 12px;
            border: 2px solid #eee; background: white; color: var(--text-dark);
            font-size: 14px; font-weight: 600; cursor: pointer; text-align: left;
            transition: all 0.2s; position: relative;
        }
        .quiz-option:active { transform: scale(0.98); }
        .quiz-option.correct { border-color: var(--success); background: #E8F5E9; color: var(--success); }
        .quiz-option.wrong { border-color: var(--danger); background: #FFEBEE; color: var(--danger); }
        
        .quiz-feedback {
            margin-top: 15px; padding: 15px; border-radius: 12px; display: none;
            font-size: 14px; line-height: 1.5;
        }
        .feedback-correct { background: #E8F5E9; color: #2E7D32; border: 1px solid #C8E6C9; }
        .feedback-wrong { background: #FFEBEE; color: #C62828; border: 1px solid #FFCDD2; }

        /* Profile & Score Ring */
        .score-circle {
            width: 120px; height: 120px; border-radius: 50%;
            background: conic-gradient(var(--primary) 0% 0%, #eee 0% 100%);
            margin: 0 auto 20px auto; position: relative;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .score-inner {
            width: 100px; height: 100px; border-radius: 50%; background: white;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .score-num { font-size: 32px; font-weight: 800; color: var(--primary); }
        
        .log-item { font-size: 12px; padding: 8px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; }
        .log-pos { color: var(--success); }
        .log-neg { color: var(--danger); }
        
        .deduction-alert { background: #FFEBEE; border: 1px solid #EF9A9A; color: #C62828; padding: 10px; border-radius: 10px; margin-top: 10px; display: none; font-size: 13px; }

        /* Nav Bar */
        .nav-bar {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            width: calc(100% - 40px); max-width: 440px;
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(20px);
            display: flex; justify-content: space-around; padding: 12px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); border-radius: 30px; z-index: 100; border: 1px solid rgba(255,255,255,0.5);
        }
        .nav-item { text-align: center; color: #B0BEC5; font-size: 10px; cursor: pointer; transition: color 0.3s; }
        .nav-item.active { color: var(--primary); font-weight: 700; }
        .nav-item i { display: block; font-size: 20px; margin-bottom: 2px; }

        /* General */
        .page { display: none; animation: fadeIn 0.3s ease; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        .back-btn { background: none; border: none; color: var(--primary); font-weight: 600; cursor: pointer; margin-bottom: 15px; display: flex; align-items: center; font-size: 14px; }
        .section-title { font-size: 11px; font-weight: 800; color: #546E7A; margin: 25px 0 10px 5px; letter-spacing: 1px; text-transform: uppercase; }
        textarea, input, select { width: 100%; padding: 12px; border-radius: 12px; border: 1px solid #ddd; margin-bottom: 10px; box-sizing: border-box; outline: none; }
        .invest-btn { width: 100%; padding: 12px; background: var(--primary); color: white; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; }
        .checklist-item { display: flex; align-items: center; padding: 14px; background: white; margin-bottom: 10px; border-radius: 12px; border: 1px solid #f0f0f0; }
        .checklist-item input { margin-right: 12px; transform: scale(1.3); accent-color: var(--primary); }

    </style>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>

<div class="app-container">
    
    <div id="page-home" class="page active">
        <header>
            <div class="header-left">
                <img src="icon.png" alt="Logo" class="app-logo" onerror="this.src='https://via.placeholder.com/50'">
                <h1>Queen's Gambit</h1>
            </div>
            <div class="user-badge" onclick="navTo('profile')">
                <img src="icon.png" class="user-avatar-mini" onerror="this.src='https://via.placeholder.com/30'">
                <div class="user-score-mini" id="mini-score">0</div>
            </div>
        </header>

        <div class="glass-card labubu-card" onclick="refreshQuote()">
            <h2><i class="fas fa-crown"></i>&nbsp; æº–è‘£å¨˜å¿ƒæ³• (é»æ“Šæ›´æ–°)</h2>
            <p id="daily-quote">"ç”·äººæŠ•è³‡åœ¨å“ªè£¡ï¼Œå¿ƒå°±åœ¨å“ªè£¡ã€‚"</p>
        </div>

        <div class="section-title">æ™¨é–“å„€å¼ DAILY RITUAL</div>
        <div class="glass-card">
            <div class="checklist-item">
                <input type="checkbox" onchange="updateScore('æ™¨é–“è‡ªä¿¡ç¢ºèª', 10, this)">
                <span>æ ¸å¿ƒè‡ªä¿¡ç¢ºèª (æˆ‘æ˜¯çå“)</span>
            </div>
            <div class="checklist-item">
                <input type="checkbox" onchange="updateScore('æƒ…ç·’è­·ç›¾é–‹å•Ÿ', 10, this)">
                <span>æƒ…ç·’è­·ç›¾é–‹å•Ÿ (ä¸éš¨ä¹‹èµ·èˆ)</span>
            </div>
            <div class="checklist-item">
                <input type="checkbox" onchange="updateScore('å¤–è²Œç®¡ç†ç¢ºèª', 10, this)">
                <span>å¤–è²Œè³‡ç”¢ç›¤é» (å¦å®¹ç©¿æ­)</span>
            </div>
        </div>

        <div class="section-title">æˆ°è¡“å·¥å…·ç®± TACTICAL TOOLS</div>
        <div class="grid">
            <div class="feature-card fc-invest" onclick="navTo('invest')">
                <i class="fas fa-hand-holding-usd"></i>
                <h3>æŠ•è³‡è¨˜å¸³æœ¬</h3>
                <span>(+10åˆ†)</span>
            </div>
            <div class="feature-card fc-radar" onclick="navTo('radar')">
                <i class="fas fa-radar"></i>
                <h3>å„ªè³ªç”·é›·é”</h3>
                <span>ç¯©é¸é«˜è³‡ç”¢</span>
            </div>
            <div class="feature-card fc-auditor" onclick="navTo('auditor')">
                <i class="fas fa-comments"></i>
                <h3>è¨Šæ¯å¯©è¨ˆå“¡</h3>
                <span>(+5åˆ†)</span>
            </div>
            <div class="feature-card fc-locker" onclick="navTo('locker')">
                <i class="fas fa-snowflake"></i>
                <h3>æƒ…ç·’å†·å‡åº«</h3>
                <span>(+5åˆ†)</span>
            </div>
        </div>
        
        <div class="glass-card" style="margin-top: 15px; text-align: center; cursor: pointer; border-left: 5px solid #673AB7;" onclick="navTo('dojo')">
            <div style="display:flex; align-items:center; justify-content:center; color:#673AB7;">
                <i class="fas fa-chess-queen" style="font-size: 20px; margin-right:10px;"></i>
                <h3 style="margin: 0; font-size: 16px;">å¯¦æˆ°æ¨¡æ“¬è€ƒ (éŒ¯é¡Œå€’æ‰£)</h3>
            </div>
            <span style="font-size:12px; color:#888;">ç­”å°+3ï¼Œç­”éŒ¯-6ï¼Œè«‹è¬¹æ…ä½œç­”ã€‚</span>
        </div>
    </div>

    <div id="page-profile" class="page">
        <button class="back-btn" onclick="navTo('home')"><i class="fas fa-arrow-left"></i>&nbsp; è¿”å›é¦–é </button>
        <h2>ğŸ‘¸ å¥³ç‹æª”æ¡ˆ</h2>
        <div class="glass-card" style="text-align: center;">
            <div class="section-title" style="margin-top:0;">ä»Šæ—¥ç©åˆ†</div>
            <div class="score-circle" id="score-ring">
                <div class="score-inner">
                    <div class="score-num" id="profile-score">0</div>
                    <div class="score-label">POINTS</div>
                </div>
            </div>
            <div id="score-comment" style="font-size:14px; font-weight:bold; color:var(--primary);"></div>
            <div id="deduction-box" class="deduction-alert">
                <strong>âš ï¸ æ‰£åˆ†è­¦å ±ï¼š</strong><br><span id="deduction-reason"></span>
            </div>
        </div>
        <div class="section-title">ğŸŒ™ æ™šé–“èª å¯¦å¾©ç›¤ (çŠ¯éŒ¯å‹¾é¸)</div>
        <div class="glass-card" style="background: #fff0f0;">
            <div class="checklist-item">
                <input type="checkbox" onchange="updateScore('è¦–å§¦ä»–ç¤¾ç¾¤', -20, this)"><span>å¿ä¸ä½è¦–å§¦ IG/FB (-20)</span>
            </div>
            <div class="checklist-item">
                <input type="checkbox" onchange="updateScore('å‚³è¨å¥½è¨Šæ¯', -30, this)"><span>ä¸»å‹•å‚³ä½ä½è¨å¥½è¨Šæ¯ (-30)</span>
            </div>
            <div class="checklist-item">
                <input type="checkbox" onchange="updateScore('æƒ…ç·’å¤±æ§', -20, this)"><span>æƒ…ç·’å¤±æ§/å¤§åµå¤§é¬§ (-20)</span>
            </div>
        </div>
        <div class="section-title">ç©åˆ†ç´€éŒ„ LOG</div>
        <div class="glass-card" id="score-log" style="max-height: 200px; overflow-y: auto;"></div>
        <div style="text-align:center;"><span style="font-size:12px; color:#aaa; cursor:pointer;" onclick="resetDaily()">[é‡ç½®ä»Šæ—¥æ•¸æ“š]</span></div>
    </div>

    <div id="page-invest" class="page">
        <button class="back-btn" onclick="navTo('home')"><i class="fas fa-arrow-left"></i>&nbsp; è¿”å›é¦–é </button>
        <h2>ğŸ’° æŠ•è³‡è¨˜å¸³æœ¬</h2>
        <div class="glass-card">
            <input type="text" id="invest-desc" placeholder="é …ç›® (ä¾‹: æ¥é€ã€ç¦®ç‰©)">
            <select id="invest-type"><option value="money">ğŸ’¸ é‡‘éŒ¢æŠ•å…¥</option><option value="time">â³ æ™‚é–“æŠ•å…¥</option><option value="effort">â¤ï¸ æƒ…ç·’æŠ•å…¥</option></select>
            <input type="number" id="invest-val" placeholder="åƒ¹å€¼">
            <button class="invest-btn" onclick="addInvest()">å¯«å…¥ (+10åˆ†)</button>
        </div>
        <div class="section-title">æ­·å²ç´€éŒ„</div>
        <div id="invest-history" style="margin-top:10px;"></div>
    </div>

    <div id="page-radar" class="page">
        <button class="back-btn" onclick="navTo('home')"><i class="fas fa-arrow-left"></i>&nbsp; è¿”å›é¦–é </button>
        <h2>ğŸ§ å„ªè³ªç”·é›·é”</h2>
        <div id="checklist-container"></div>
        <div id="radar-result" class="glass-card" style="display:none; text-align:center; font-weight:bold; margin-top:20px;"></div>
    </div>

    <div id="page-auditor" class="page">
        <button class="back-btn" onclick="navTo('home')"><i class="fas fa-arrow-left"></i>&nbsp; è¿”å›é¦–é </button>
        <h2>ğŸ“ è¨Šæ¯å¯©è¨ˆå“¡</h2>
        <div class="glass-card">
            <textarea id="msg-input" placeholder="è²¼ä¸Šå¦³æƒ³å‚³çµ¦ä»–çš„è¨Šæ¯..." oninput="analyzeMessage()"></textarea>
            <div id="msg-feedback" style="color: #666; font-size:14px;">ç­‰å¾…è¼¸å…¥...</div>
        </div>
    </div>

    <div id="page-locker" class="page">
        <button class="back-btn" onclick="navTo('home')"><i class="fas fa-arrow-left"></i>&nbsp; è¿”å›é¦–é </button>
        <h2>â„ï¸ æƒ…ç·’å†·å‡åº«</h2>
        <div class="glass-card" style="text-align: center;">
            <div id="timer-display" style="font-size: 50px; font-weight: 800; color: var(--primary); margin: 30px 0;">00:00:00</div>
            <button id="btn-freeze-short" class="invest-btn" onclick="startFreeze(10)" style="background: #00BCD4; margin-bottom: 10px;">âš¡ï¸ é«”é©—å†·å‡ (10ç§’)</button>
            <button id="btn-freeze-long" class="invest-btn" onclick="startFreeze(3600)" style="background: #c62828;">ğŸ”’ æ­£å¼å†·å‡ (1å°æ™‚)</button>
            <p id="freeze-msg" style="display:none; margin-top:15px; color:#c62828;">å†·å‡ä¸­ï¼Œ+5 ç©åˆ†ï¼</p>
        </div>
    </div>

    <div id="page-dojo" class="page">
        <button class="back-btn" onclick="navTo('home')"><i class="fas fa-arrow-left"></i>&nbsp; è¿”å›é¦–é </button>
        <h2>ğŸ¥‹ å¯¦æˆ°æ¨¡æ“¬è€ƒ (Quiz)</h2>
        <div class="glass-card">
            <div id="dojo-q" style="font-size: 16px; font-weight: bold; margin-bottom: 20px; line-height: 1.5; color: #333;">é¡Œç›®è¼‰å…¥ä¸­...</div>
            
            <div id="quiz-options">
                </div>

            <div id="quiz-feedback" class="quiz-feedback"></div>
        </div>
        
        <div style="display:flex; justify-content:space-between; margin-top:15px; padding:0 10px;">
            <span id="quiz-counter" style="font-size:12px; color:#aaa; line-height:30px;">1 / 100</span>
            <button class="invest-btn" id="btn-next-quiz" onclick="nextQuiz()" style="width: auto; padding: 8px 20px; display: none;">ä¸‹ä¸€é¡Œ</button>
        </div>
    </div>

    <div class="nav-bar">
        <div class="nav-item active" onclick="navTo('home')"><i class="fas fa-home"></i>é¦–é </div>
        <div class="nav-item" onclick="navTo('profile')"><i class="fas fa-user-circle"></i>æª”æ¡ˆ</div>
        <div class="nav-item" onclick="navTo('invest')"><i class="fas fa-wallet"></i>æŠ•è³‡</div>
        <div class="nav-item" onclick="navTo('dojo')"><i class="fas fa-chess-queen"></i>è€ƒå ´</div>
    </div>

</div>

<script>
    // --- 1. ç©åˆ†èˆ‡æ•¸æ“šç®¡ç† ---
    let todayData = JSON.parse(localStorage.getItem('queen_daily')) || resetDailyData();
    if(todayData.date !== new Date().toLocaleDateString()) { todayData = resetDailyData(); saveData(); }

    function resetDailyData() { return { date: new Date().toLocaleDateString(), score: 0, logs: [] }; }
    function saveData() { localStorage.setItem('queen_daily', JSON.stringify(todayData)); updateProfileUI(); }
    
    function updateScore(action, points, element) {
        if(element && element.type === 'checkbox' && !element.checked) points = -points;
        todayData.score += points;
        todayData.logs.unshift({ action, points, time: new Date().toLocaleTimeString() });
        saveData();
    }

    function updateProfileUI() {
        const score = todayData.score;
        document.getElementById('profile-score').innerText = score;
        document.getElementById('mini-score').innerText = score;
        let percent = Math.min(Math.max(score, 0), 100);
        let color = score < 0 ? '#D32F2F' : (score > 80 ? '#D4AF37' : '#4A148C');
        document.getElementById('score-ring').style.background = `conic-gradient(${color} ${percent}%, #eee ${percent}% 100%)`;
        
        const logList = document.getElementById('score-log');
        logList.innerHTML = todayData.logs.map(l => `<div class="log-item"><span>${l.action}</span><span class="${l.points>0?'log-pos':'log-neg'}">${l.points>0?'+':''}${l.points}</span></div>`).join('');
        
        const negatives = todayData.logs.filter(l => l.points < 0);
        document.getElementById('deduction-box').style.display = negatives.length > 0 ? 'block' : 'none';
        if(negatives.length > 0) document.getElementById('deduction-reason').innerText = negatives.map(n => n.action).join('ã€');
    }
    updateProfileUI();
    function resetDaily() { if(confirm("é‡ç½®ä»Šæ—¥æ•¸æ“šï¼Ÿ")) { todayData = resetDailyData(); document.querySelectorAll('input[type="checkbox"]').forEach(c=>c.checked=false); saveData(); } }

    // --- 2. å°èˆª ---
    function navTo(pageId) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById('page-' + pageId).classList.add('active');
        window.scrollTo(0,0);
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        if(pageId==='home') document.querySelectorAll('.nav-item')[0].classList.add('active');
        if(pageId==='profile') document.querySelectorAll('.nav-item')[1].classList.add('active');
        if(pageId==='invest') document.querySelectorAll('.nav-item')[2].classList.add('active');
        if(pageId==='dojo') document.querySelectorAll('.nav-item')[3].classList.add('active');
    }

    // --- 3. å¯¦æˆ°æ¨¡æ“¬è€ƒ (é¸æ“‡é¡Œç‰ˆ) ---
    // é€™è£¡æˆ‘æº–å‚™äº†æ“´å……å¾Œçš„é¡Œåº«ï¼Œæ¨¡æ“¬çœŸå¯¦æƒ…å¢ƒ
    const quizData = [
        {
            q: "é€±äº”æ™šä¸Š9é»ï¼Œä»–çªç„¶å‚³è¨Šï¼šã€Œè¦ä¸è¦å‡ºä¾†å–ä¸€æ¯ï¼Ÿã€(å‚™èƒæ¸¬è©¦)",
            options: [
                "å¥½å•Šï¼å‰›å¥½æˆ‘ä¹Ÿæ²’äº‹ï¼Œå“ªè£¡è¦‹ï¼Ÿ",
                "é€™éº¼æ™šäº†å–”ï¼Ÿä½ æ˜¯æƒ³æˆ‘äº†å—ï¼Ÿ",
                "çœŸä¸å·§ï¼Œæˆ‘å·²ç¶“ä¼‘æ¯äº†ã€‚ä¸‹æ¬¡æ—©é»ç´„å–”ï½"
            ],
            ans: 2, // ç´¢å¼•å¾ 0 é–‹å§‹ï¼Œæ‰€ä»¥ 2 æ˜¯ç¬¬ä¸‰å€‹é¸é …
            reason: "é€™æ˜¯å…¸å‹çš„æ·±å¤œå‚™èƒé‚€ç´„ã€‚æ¥å—=å»‰åƒ¹ï¼Œåå•=èª¿æƒ…ä½†ä½éšä½ã€‚æ­£è§£æ˜¯å»ºç«‹æ™‚é–“é‚Šç•Œï¼Œæ•™å°ä»–ã€Œæˆ‘æ˜¯éœ€è¦é ç´„çš„ã€ã€‚"
        },
        {
            q: "è¨Šæ¯å·²è®€ä¸å›è¶…é 24 å°æ™‚ï¼Œä»–çªç„¶å›è¦†ï¼šã€ŒæŠ±æ­‰å‰›åœ¨å¿™ã€‚ã€",
            options: [
                "æ²’é—œä¿‚å•¦ï¼Œå·¥ä½œé‡è¦ï¼Œè¦æ³¨æ„ä¼‘æ¯å–”ï¼",
                "å†éš” 24 å°æ™‚å›è¦†ï¼Œèªæ°£å¹³æ·¡ï¼Œä¸å•ä»–åœ¨å¿™ä»€éº¼ã€‚",
                "ä½ çµ‚æ–¼å›äº†ï¼æˆ‘é‚„ä»¥ç‚ºä½ å‡ºäº‹äº†å‘¢ã€‚"
            ],
            ans: 1,
            reason: "ç§’å›ã€Œæ²’é—œä¿‚ã€æ˜¯çå‹µä»–çš„å¿½è¦–ã€‚é¡åƒæ³•å‰‡ï¼šä»–å†·å¦³å°±å†·ï¼Œä¸è¦æä¾›å…è²»çš„æƒ…ç·’åƒ¹å€¼ã€‚"
        },
        {
            q: "ç´„æœƒçµå¸³æ™‚ï¼Œä»–ç›¯è‘—å¸³å–®ä¸å‹•ï¼Œæˆ–æè­° AA åˆ¶ã€‚",
            options: [
                "å°·å°¬åœ°æå‡ºéŒ¢åŒ…ä»˜æ‰å…¨éƒ¨ï¼Œå¿ƒè£¡è¦ºå¾—å§”å±ˆã€‚",
                "å¤§æ–¹ä»˜æ‰è‡ªå·±çš„éƒ¨åˆ†ï¼ˆæˆ–å…¨éƒ¨ï¼‰ï¼Œå›å®¶å¾Œå°é–åˆªé™¤ã€‚",
                "æ’’å¬Œèªªï¼šã€Œé€™é¤ä½ è«‹å®¢å˜›ï½ä¸‹æ¬¡æˆ‘è«‹ä½ å–é£²æ–™ã€‚ã€"
            ],
            ans: 1,
            reason: "å¹´è–ª 400 è¬çš„ç”·äººé‚„åœ¨è¨ˆè¼ƒé€™ä¸€é¤ï¼Œèªªæ˜ä»–æ ¼å±€å¤ªå°æˆ–æ ¹æœ¬ä¸æƒ³æŠ•è³‡å¦³ã€‚ç›´æ¥æ­¢æï¼Œä¸è¦ä¹è¨ã€‚"
        },
        {
            q: "ä»–å‚³äº†ä¸€å¼µè‡ªæ‹ç…§çµ¦å¦³ï¼Œå•ï¼šã€Œé€™å¼µå¸¥å—ï¼Ÿã€",
            options: [
                "å“‡ï¼è¶…å¸¥çš„ï¼çœŸçš„å¥½åƒæ˜æ˜Ÿå–”ï¼(çœ¼å†’æ„›å¿ƒ)",
                "å›ä¸€å€‹è¡¨æƒ…ç¬¦è™Ÿï¼Œæˆ–æ·¡æ·¡èªªã€Œçœ‹èµ·ä¾†æ°£è‰²ä¸éŒ¯ã€ã€‚",
                "é‚„å¥½è€¶ï¼Œæˆ‘è¦ºå¾—ä½ æœ¬äººæ¯”è¼ƒå¥½çœ‹ã€‚"
            ],
            ans: 1,
            reason: "ä¸è¦ç•¶ç²‰çµ²ã€‚ç•¶å¦³éåº¦ç¨±è®šï¼Œå¦³å°±è®Šæˆäº†æä¾›æƒ…ç·’åƒ¹å€¼çš„ä¸‹ä½è€…ã€‚ä¿æŒè©•å¯©å§¿æ…‹ã€‚"
        },
        {
            q: "ä»–èªªï¼šã€Œæˆ‘ç¾åœ¨é‚„ä¸æƒ³å®šä¸‹ä¾†ï¼Œæƒ³å…ˆç•¶æœ‹å‹ã€‚ã€",
            options: [
                "æ²’é—œä¿‚ï¼Œæˆ‘å¯ä»¥ç­‰ï¼Œæˆ‘ç›¸ä¿¡ä½ æœƒæ”¹è®Šå¿ƒæ„çš„ã€‚",
                "ç‚ºä»€éº¼ï¼Ÿæ˜¯æˆ‘å“ªè£¡ä¸å¤ å¥½å—ï¼Ÿ(é–‹å§‹ç„¦æ…®)",
                "çœŸå·§ï¼Œæˆ‘ä¹Ÿé‚„åœ¨è§€å¯Ÿä½ é©ä¸é©åˆé•·æœŸç™¼å±•å‘¢ã€‚"
            ],
            ans: 2,
            reason: "ä¸è¦ä¹æ±‚æ‰¿è«¾ã€‚åå®¢ç‚ºä¸»ï¼Œè®“ä»–çŸ¥é“ã€Œä½ ä¹Ÿåœ¨æˆ‘çš„è€ƒæ ¸æœŸã€ï¼Œç¬é–“æ‹‰é«˜ä½éšã€‚"
        },
        {
            q: "ä»–å•ï¼šã€Œå¦³äº¤éå¹¾å€‹ç”·æœ‹å‹ï¼Ÿã€(åˆºæ¢éš±ç§)",
            options: [
                "ä¸‰å€‹ï¼Œç¬¬ä¸€å€‹æ˜¯å¤§å­¸åŒå­¸ï¼Œç¬¬äºŒå€‹æ˜¯...",
                "é€™å¯æ˜¯ä»˜è²»å…§å®¹å–”ï¼Œç†Ÿä¸€é»å†å‘Šè¨´ä½  (å¾®ç¬‘)ã€‚",
                "ä½ çŒœçŒœçœ‹å•Šï¼Ÿä½ çœ‹èµ·ä¾†å¾ˆæœ‰ç¶“é©—å–”ã€‚"
            ],
            ans: 1,
            reason: "ä¿æŒç¥ç§˜æ„Ÿã€‚ä¸è¦åƒé¢è©¦ä¸€æ¨£å…¨ç›¤æ‰˜å‡ºï¼Œè®“ä»–çŒœä¸é€å¦³ã€‚"
        },
        {
            q: "ç¬¬ä¸€æ¬¡ç´„æœƒï¼Œä»–é²åˆ° 20 åˆ†é˜ä¸”æ²’æœ‰æå‰é€šçŸ¥ã€‚",
            options: [
                "ååœ¨é‚£è£¡ç”Ÿæ‚¶æ°£ï¼Œç­‰ä»–ä¾†äº†ä¹‹å¾Œæ“ºè‡­è‡‰ã€‚",
                "æ“”å¿ƒä»–æ˜¯ä¸æ˜¯è¿·è·¯äº†ï¼Œä¸€ç›´å‚³è¨Šæ¯å•ä»–åœ¨å“ªã€‚",
                "15åˆ†é˜æ™‚é›¢é–‹ã€‚äº‹å¾Œå›ï¼šã€Œæˆ‘æœ‰äº‹å…ˆè¡Œä¸€æ­¥äº†ã€‚ã€"
            ],
            ans: 2,
            reason: "æ™‚é–“æˆæœ¬æ¥µé«˜ã€‚é²åˆ°æ˜¯å¤§å¿Œï¼Œé›¢é–‹æ˜¯å°è‡ªå·±æ™‚é–“çš„å°Šé‡ï¼Œä¹Ÿæ˜¯æœ€æœ‰åŠ›çš„æ‡²ç½°ã€‚"
        },
        {
            q: "ä»–è©•è«–å¦³çš„ç©¿è‘—ï¼šã€Œå¦³è£™å­å¤ªçŸ­äº†å§ï¼Ÿã€(æ‰“å£“æ¸¬è©¦)",
            options: [
                "æœƒå—ï¼Ÿé‚£æˆ‘ä¸‹æ¬¡ç©¿é•·ä¸€é»...",
                "ä½ ä¸å–œæ­¡å–”ï¼Ÿé‚£æˆ‘ä»¥å¾Œä¸ç©¿é€™ä»¶äº†ã€‚",
                "æœƒå—ï¼Ÿæˆ‘è¦ºå¾—é€™é¡¯å¾—æˆ‘è…¿å¾ˆé•·ï¼Œå¥½çœ‹å—ï¼Ÿ"
            ],
            ans: 2,
            reason: "ä¿æŒæ¡†æ¶ã€‚ä¸è¦å› ç‚ºä»–çš„æ‰“å£“è€Œè‡ªæˆ‘æ‡·ç–‘ï¼Œåè€Œè¦å±•ç¤ºè‡ªä¿¡ã€‚"
        },
        {
            q: "ä»–åœ¨å¦³é¢å‰èª‡çå…¶ä»–å¥³ç”Ÿæ¼‚äº®ã€‚",
            options: [
                "ç”Ÿæ°£åƒé†‹ï¼šã€Œé‚£ä½ å»æ‰¾å¥¹å•Šï¼ã€",
                "è‡ªå‘ï¼šã€Œå°å•Šï¼Œå¥¹æ¯”æˆ‘ç˜¦å¥½å¤š...ã€",
                "æ·¡æ·¡åœ°èªªï¼šã€Œæ˜¯å–”ï¼Œå¥¹ç¢ºå¯¦è »æ¼‚äº®çš„ã€‚ã€ç„¶å¾Œè½‰ç§»è©±é¡Œã€‚"
            ],
            ans: 2,
            reason: "çµ•å°è‡ªä¿¡ã€‚å¥³ç‹ä¸å±‘æ–¼æ¯”è¼ƒï¼Œå¤§æ–¹æ‰¿èªåè€Œé¡¯å¾—å¦³æ ¼å±€å¤§ã€æœ‰åº•æ°£ã€‚"
        },
        {
            q: "ä»–å•ï¼šã€Œå¦‚æœæˆ‘æ²’éŒ¢äº†å¦³é‚„æœƒæ„›æˆ‘å—ï¼Ÿã€(å»¢ç‰©æ¸¬è©¦)",
            options: [
                "ç•¶ç„¶æ„›å•Šï¼Œæˆ‘çœ‹é‡çš„æ˜¯ä½ çš„äººã€‚",
                "é‚£ä½ è¦åŠ æ²¹å–”ï¼Œæˆ‘ä¸å¸Œæœ›é€™ç¨®äº‹æƒ…ç™¼ç”Ÿ (å¾®ç¬‘)ã€‚",
                "å¦‚æœä½ æ²’éŒ¢ï¼Œæˆ‘å€‘å°±ä¸€èµ·å»è¦é£¯ï¼"
            ],
            ans: 1,
            reason: "ä¸è¦çµ¦ç”·äººã€Œæˆ‘å¯ä»¥è»Ÿçˆ›ã€çš„å¿ƒç†æš—ç¤ºã€‚æº«æŸ”åœ°è¨­ç«‹ã€Œæˆ‘ä¸æ¥å—è²§çª®ã€çš„åº•ç·šã€‚"
        },
        // ... (ç‚ºäº†ç¯€çœç©ºé–“ï¼Œé€™è£¡å±•ç¤º10é¡Œï¼Œå¯¦éš›ç¨‹å¼ç¢¼ä¸­æˆ‘æœƒæ”¾å…¥æ›´å¤šé¡Œç›®æ¨¡çµ„)
        { q: "åŠå¤œä¸€é»å‚³è¨Šã€Œç¡äº†å—ã€", options: ["é‚„æ²’ï¼Œæ€éº¼äº†ï¼Ÿ", "ç›´æ¥ç„¡è¦–ï¼Œæ—©èµ·å†å›", "ç¡ä¸è‘—ï¼Œæƒ³èŠèŠå—"], ans: 1, reason: "æ·±å¤œé‚€ç´„é€šå¸¸åªæœ‰æ€§ã€‚æ‹’çµ•åšä¾¿åˆ©å•†åº—ã€‚" },
        { q: "ä»–å¿½å†·å¿½ç†±ï¼Œå…©å¤©æ²’æ¶ˆæ¯", options: ["å‚³è¨Šå•ã€Œä½ åœ¨å¿™å—ã€", "å°ˆæ³¨ç”Ÿæ´»ï¼Œå®Œå…¨ä¸ä¸»å‹•", "ç™¼è„¾æ°£å•ä»–å»å“ªäº†"], ans: 1, reason: "æ•µä¸å‹•æˆ‘ä¸å‹•ï¼Œæ¯”èª°æ²‰å¾—ä½æ°£ã€‚" },
        { q: "ä»–é€äº†ä¸å–œæ­¡çš„ç¦®ç‰©", options: ["å‹‰å¼·èªªå–œæ­¡", "ç›´æ¥æ‹’æ”¶", "è¬è¬å¿ƒæ„ï¼Œä½†æš—ç¤ºå–œæ­¡çš„é¡è‰²"], ans: 2, reason: "çå‹µè¡Œç‚º(é€ç¦®)ï¼Œä½†èª¿æ•™å“å‘³(å¼•å°æŠ•å…¥)ã€‚" },
        { q: "æƒ³è¦–å§¦ä»–çš„ IG", options: ["é–‹å°å¸³å·å·çœ‹", "å¿ä½ä¸çœ‹", "ç›´æ¥å°é–çœ¼ä¸è¦‹ç‚ºæ·¨"], ans: 2, reason: "è¦–å§¦æ˜¯è‡ªè™ï¼Œå°é–æ˜¯æœ€é«˜ç´šçš„é˜²ç¦¦ã€‚" },
        { q: "ä»–æ¢ä»¶å¥½ä½†å°å¦³å†·æ·¡", options: ["åŠ å€å°ä»–å¥½", "æœæ–·æ”¾æ‰‹", "ç­‰å¾…ä»–å›å¿ƒè½‰æ„"], ans: 1, reason: "æƒ…ç·’åƒ¹å€¼ > ç¤¾æœƒåƒ¹å€¼ã€‚å°å¦³ä¸å¥½å°±æ˜¯åƒåœ¾ã€‚" }
    ];

    let currentQuizIndex = 0;
    let quizScoreToday = 0;

    function renderQuiz() {
        const quiz = quizData[currentQuizIndex];
        document.getElementById('dojo-q').innerText = `Q${currentQuizIndex+1}: ${quiz.q}`;
        document.getElementById('quiz-counter').innerText = `${currentQuizIndex + 1} / ${quizData.length}`;
        
        const optionsContainer = document.getElementById('quiz-options');
        optionsContainer.innerHTML = ''; // æ¸…ç©ºé¸é …
        
        document.getElementById('quiz-feedback').style.display = 'none';
        document.getElementById('btn-next-quiz').style.display = 'none';

        quiz.options.forEach((opt, index) => {
            const btn = document.createElement('div');
            btn.className = 'quiz-option';
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(index, quiz.ans, quiz.reason, btn);
            optionsContainer.appendChild(btn);
        });
    }

    function checkAnswer(selectedIndex, correctIndex, reason, btnElement) {
        // é˜²æ­¢é‡è¤‡é»æ“Š
        if(document.getElementById('quiz-feedback').style.display === 'block') return;

        const feedback = document.getElementById('quiz-feedback');
        const options = document.querySelectorAll('.quiz-option');

        if (selectedIndex === correctIndex) {
            // ç­”å°
            btnElement.classList.add('correct');
            feedback.innerHTML = `<strong>âœ… æ­£ç¢ºï¼(+3åˆ†)</strong><br>${reason}`;
            feedback.className = 'quiz-feedback feedback-correct';
            updateScore('æ¨¡æ“¬è€ƒç­”å°', 3);
        } else {
            // ç­”éŒ¯
            btnElement.classList.add('wrong');
            // é¡¯ç¤ºæ­£ç¢ºç­”æ¡ˆ
            options[correctIndex].classList.add('correct');
            feedback.innerHTML = `<strong>âŒ éŒ¯èª¤ï¼(-6åˆ†)</strong><br>é«˜ä½æ€ç¶­ï¼š${reason}`;
            feedback.className = 'quiz-feedback feedback-wrong';
            updateScore('æ¨¡æ“¬è€ƒç­”éŒ¯', -6);
        }

        feedback.style.display = 'block';
        document.getElementById('btn-next-quiz').style.display = 'block';
    }

    function nextQuiz() {
        currentQuizIndex++;
        if (currentQuizIndex >= quizData.length) {
            alert("æ­å–œï¼å¦³å·²å®Œæˆæ‰€æœ‰è©¦é¡Œã€‚è«‹é‡æ–°é–‹å§‹è¤‡ç¿’ã€‚");
            currentQuizIndex = 0;
        }
        renderQuiz();
    }
    
    // åˆå§‹åŒ–ç¬¬ä¸€é¡Œ
    renderQuiz();

    // --- 4. å…¶ä»–åŠŸèƒ½ (ç›²ç›’/è¨˜å¸³/é›·é”/å¯©è¨ˆ/å†·å‡) ---
    // (é€™éƒ¨åˆ†ä»£ç¢¼èˆ‡ v4.0 ç›¸åŒï¼Œä¿æŒåŠŸèƒ½å®Œæ•´æ€§)
    const quotes = ["æˆ‘æ˜¯å®šåƒ¹ 450 çš„é™é‡ç›²ç›’ï¼Œå«Œè²´å°±åˆ¥è²·ã€‚", "ä¸è¦ç•¶å…è²»è©¦ç”¨å“ï¼Œè¦ç•¶éœ€é ç´„çš„å¥¢ä¾ˆå“ã€‚", "ç”·äººçš„æŠ±æ€¨æ˜¯æŠ•å…¥æˆæœ¬çš„é–‹å§‹ã€‚", "æ©Ÿç‡åªæœ‰ 1.4%ï¼Œä»–èƒ½ç´„åˆ°æˆ‘æ˜¯é‹æ°£å¥½ã€‚", "å¼·è€…å¾ä¸è‡ªè­‰ï¼Œåªçœ‹çµæœã€‚", "æº«æŸ”æ˜¯ä¿®é¤Šï¼Œä¸å¥½æƒ¹æ˜¯åŸå‰‡ã€‚", "éŒ¢åœ¨å“ªè£¡ï¼Œå¿ƒå°±åœ¨å“ªè£¡ã€‚", "çœ‹ä»–ç‚ºäº†å¦³æ”¾æ£„äº†ä»€éº¼ã€‚", "æƒ…ç·’ç©©å®šæ˜¯ç‚ºäº†è®“è‡ªå·±å„ªé›…ã€‚", "å°ä»–å¥½æ˜¯çå‹µï¼Œä¸æ˜¯ç¾©å‹™ã€‚", "å¦³çš„åº•ç·šæ±ºå®šäº†ä»–çš„ä¸Šé™ã€‚", "æ•¢æ–¼å¤±å»ï¼Œæ‰èƒ½çœŸæ­£æ“æœ‰ã€‚", "å¹´è–ª 400 è¬æ²’ç”¨ï¼Œé¡˜æ„èŠ±æ‰ç®—æ•¸ã€‚", "è¦åšä»–çš„åˆå¤¥äººï¼Œä¸åšè³¢å…§åŠ©ã€‚", "ä¿æŒ 30% çš„ç¥ç§˜æ„Ÿã€‚", "å¿™ç¢Œæ˜¯é«˜åƒ¹å€¼çš„è­‰æ˜ã€‚", "ç”·äººæ˜¯çµäººï¼Œçµç‰©ä¸è·³ç¶²ã€‚", "çœ‹æ‡‚æ•¸æ“šæ‰ä¸æœƒè¼¸ã€‚", "å¦³çš„æ™‚é–“æ¯”ä»–çš„éŒ¢æ›´è²´ã€‚", "æ²’é—œä¿‚æ˜¯åœ¨é™ä½èº«åƒ¹ã€‚", "æˆ’æ‰å°åƒåœ¾ç”·çš„åŒæƒ…ã€‚", "é¡åƒæ³•å‰‡ï¼šä»–å†·å¦³å°±å†·ã€‚", "ä¸è¦è§£é‡‹ã€‚", "ç¨ç«‹æ˜¯åº•æ°£ã€‚", "å¦³å€¼å¾—æœ€å¥½çš„ã€‚", "ç¯©é¸å¤§æ–¼æ”¹è®Šã€‚", "æ‰¿è«¾æ˜¯æœŸè²¨ï¼Œè¡Œå‹•æ˜¯ç¾è²¨ã€‚", "åšä¸€å€‹è®“ä»–æ€•å¤±å»çš„å¥³äººã€‚", "å¦³æ˜¯çå“ã€‚", "æˆ‘å¯ä»¥æ„›ä½ ï¼Œä¹Ÿå¯ä»¥æ›äº†ä½ ã€‚"];
    function refreshQuote() { document.getElementById('daily-quote').innerText = '"' + quotes[Math.floor(Math.random() * quotes.length)] + '"'; }
    
    let investments = JSON.parse(localStorage.getItem('queen_investments')) || [];
    function renderInvest() {
        const list = document.getElementById('invest-history');
        if(investments.length===0){list.innerHTML='<div style="color:#ccc;text-align:center;">å°šç„¡ç´€éŒ„</div>';return;}
        list.innerHTML = investments.map(i => `<div style="padding:10px;background:white;margin-bottom:5px;border-radius:8px;display:flex;justify-content:space-between;"><span>${i.type==='money'?'ğŸ’¸':i.type==='time'?'â³':'â¤ï¸'} ${i.desc}</span><span style="color:green;font-weight:bold;">+${i.val}</span></div>`).join('');
    }
    renderInvest();
    function addInvest() {
        const desc=document.getElementById('invest-desc').value, val=document.getElementById('invest-val').value, type=document.getElementById('invest-type').value;
        if(!desc||!val)return alert("è«‹å¡«å¯«å®Œæ•´");
        investments.unshift({id:Date.now(),desc,type,val}); localStorage.setItem('queen_investments',JSON.stringify(investments));
        updateScore('ç´€éŒ„æŠ•è³‡', 10); renderInvest(); document.getElementById('invest-desc').value=''; document.getElementById('invest-val').value='';
    }
    
    function analyzeMessage() {
        const t=document.getElementById('msg-input').value, f=document.getElementById('msg-feedback'); let e=[];
        if(t.length>40)e.push("âš ï¸ å¤ªé•·äº†"); if(t.includes("æ‹œè¨—"))e.push("âš ï¸ ä½èƒ½é‡"); if(t.includes("å› ç‚º")&&t.length>10)e.push("âš ï¸ éåº¦è§£é‡‹");
        if(!t){f.innerHTML="ç­‰å¾…è¼¸å…¥...";f.style.background="transparent";} else if(e.length===0){f.innerHTML="âœ… å®Œç¾ (+5)";f.style.background="#E8F5E9"; if(!window.audited){updateScore('è¨Šæ¯å¯©è¨ˆ',5);window.audited=true;}} else{f.innerHTML=e.join("<br>");f.style.background="#FFEBEE";}
    }

    let timer;
    function startFreeze(s) {
        clearInterval(timer); updateScore('å†·å‡åº«',5);
        document.getElementById('freeze-msg').style.display='block';
        timer=setInterval(()=>{ s--; const d=document.getElementById('timer-display'); 
        d.innerText=new Date(s*1000).toISOString().substr(11,8);
        if(s<=0){clearInterval(timer);alert("å†·å‡çµæŸ");}},1000);
    }
    
    const checklistData=[{text:"å°æœå‹™å“¡å‚²æ…¢",isRed:true},{text:"è‚¢é«”è¶Šç•Œ",isRed:true},{text:"æƒ…ç·’å¤±æ§",isRed:true},{text:"å‰ä»»",isRed:true},{text:"å€ŸéŒ¢",isRed:true},{text:"ä¸»å‹•è²·å–®",isRed:false},{text:"å…¬é–‹é—œä¿‚",isRed:false},{text:"æ”¯æŒäº‹æ¥­",isRed:false}];
    const clc=document.getElementById('checklist-container');
    checklistData.forEach(i=>{const d=document.createElement('div');d.className='checklist-item';d.innerHTML=`<input type="checkbox" onchange="calcR()" data-red="${i.isRed}"><span style="color:${i.isRed?'#c62828':'#2e7d32'}">${i.text}</span>`;clc.appendChild(d);});
    function calcR(){ const c=document.querySelectorAll('#checklist-container input:checked'); let r=0; c.forEach(i=>i.getAttribute('data-red')==='true'?r++:0); 
    const res=document.getElementById('radar-result'); res.style.display='block'; res.innerText=r>0?`âš ï¸ ${r}å€‹ç´…æ——`:"âœ… å®‰å…¨"; res.style.background=r>0?'#FFEBEE':'#E8F5E9';}

</script>

</body>
</html>